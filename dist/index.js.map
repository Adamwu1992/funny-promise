{"version":3,"file":"index.js","sources":["../src/utils.js","../src/asap.js","../src/core.js","../src/promise/resolve.js","../src/promise/reject.js","../src/promise/race.js","../index.js"],"sourcesContent":["export function needResolver() {\n  throw new TypeError('You must pass a resolver function as the first argument to the promise constructor.');\n}\n\nexport function needNew() {\n  throw new TypeError('Failed to construct \\'Promise\\': Please use the \\'new\\' operator, this object constructor cannot be called as a function.');\n}\n\nexport function selfFulfilled() {\n  throw new TypeError('You cannot resolve a promise with itself.')\n}\n\nexport function returnOwn() {\n  return new TypeError('A promises callback cannot return that same promise.')\n}\n\nexport function needArray() {\n  throw new TypeError('You must pass an array as argument.')\n}\n\nexport function noop() {}\n\nexport function isFunction(x) {\n  return typeof x === 'function';\n}\n\nexport function isArray(x) {\n  return Array.isArray(x);\n}\n\nlet id = 0;\nexport function nextId() {\n  return id++;\n}","export default function(callback, args) {\n  setTimeout(callback, 1, args);\n}","import {\n  selfFulfilled,\n  isFunction,\n  returnOwn\n} from './utils';\nimport asap from './asap';\n\nexport const PENDING = void 0;\nexport const FULFILLED = 1;\nexport const REJECTED = 2;\n\nconst TRY_CATCH_ERROR = { error: null }\nfunction tryCatch(callback, value) {\n  try {\n    return callback(value);\n  } catch(e) {\n    TRY_CATCH_ERROR.error = e;\n    return TRY_CATCH_ERROR;\n  }\n}\n\nfunction isThenable(x) {\n  return x && isFunction(x.then);\n}\n\nexport function resolve(promise, value) {\n  if (promise === value) {\n    reject(promise, selfFulfilled());\n  } else if (isThenable(value)) {\n    handleMaybeThenable(promise, value);\n  } else {\n    fulfill(promise, value);\n  }\n}\n\nexport function handleMaybeThenable(promise, thenable) {\n  const then = thenable.then;\n  if (!isFunction(then)) return;\n  // 判断是否promise\n  if (thenable.constructor === promise.constructor) {\n    handlePromise(promise, thenable);\n  } else {\n    fulfill(promise, thenable);\n  }\n}\n\nexport function handlePromise(promise, thenable) {\n  if (thenable._state === FULFILLED) {\n    fulfill(promise, thenable._result);\n  } else if (thenable._state === RE) {\n    reject(promise, thenable._result);\n  } else {\n    subscribe(\n      thenable,\n      undefined,\n      value => resolve(promise, value),\n      reason => reject(promise, reason)\n    );\n  }\n}\n\nexport function fulfill(promise, value) {\n  if (promise._state !== PENDING) return;\n  promise._state = FULFILLED\n  promise._result = value;\n\n  if (promise._subscribers.length !== 0) {\n    asap(publish, promise);\n  }\n}\n\nexport function reject(promise, reason) {\n  if (promise._state !== PENDING) return;\n  promise._state = REJECTED\n  promise._result = reason;\n\n  if (promise._subscribers.length !== 0) {\n    asap(publish, promise);\n  }\n}\n\nexport function publish(promise) {\n  const subscribers = promise._subscribers;\n\n  if (promise._state === PENDING || subscribers.length === 0) return;\n\n  for(let i = 0; i < subscribers.length; i += 3) {\n    const child = subscribers[i];\n    const callback = subscribers[i + promise._state];\n\n    if (child) {\n      invokeCallback(child, promise._state, callback, promise._result);\n    } else {\n      callback(promise._result);\n    }\n  }\n\n  subscribers.length = 0;\n}\n\n/**\n * \n * @param {*} promise: child promise\n * @param {*} state: parent promise's state\n * @param {*} callback: for child promise\n * @param {*} result: parent promse's result\n */\nexport function invokeCallback(promise, state, callback, result) {\n  const hasCallback = isFunction(callback);\n  let value;\n  let error;\n  let succeed;\n  let failed;\n\n  if (hasCallback) {\n    value = tryCatch(callback, result);\n    if (value === TRY_CATCH_ERROR) {\n      failed = true;\n      error = TRY_CATCH_ERROR.error;\n      TRY_CATCH_ERROR.error = null;\n    } else {\n      succeed = true;\n    }\n    if (value === promise) {\n      reject(promise, returnOwn())\n      return;\n    }\n  } else {\n    value = result;\n    succeed = true;\n  }\n\n  if (promise._state !== PENDING) return;\n  // 将promise迁移到对应的状态\n  if (hasCallback) {\n    if (succeed) {\n      resolve(promise, value);\n    } else if (failed) {\n      reject(promise, error);\n    }\n  } else {\n    if (state === FULFILLED) {\n      fulfill(promise, value);\n    } else if (state === REJECTED) {\n      reject(promise, value);\n    }\n  }\n}\n\nexport function subscribe(parent, child, onFulfillment, onRejection) {\n  const subscribers = parent._subscribers;\n  const length = subscribers.length;\n\n  subscribers[length] = child;\n  subscribers[length + 1] = onFulfillment;\n  subscribers[length + 2] = onRejection;\n\n  if (length === 0 && parent._state !== PENDING) {\n    asap(publish, parent);\n  }\n}","import { resolve as _resolve } from '../core';\nimport { noop } from '../utils';\n\nexport default function(value) {\n  const Constructor = this;\n  if (value && value.constructor === Constructor) {\n    return value;\n  }\n  \n  const promise = new Constructor(noop);\n  _resolve(promise, value);\n  return promise;\n}","import { reject as _reject } from '../core';\nimport { noop } from '../utils';\n\nexport default function(reason) {\n  const Constructor = this;\n  const promise = new Constructor(noop);\n  _reject(promise, reason);\n  return promise;\n}","import { isArray, needArray } from '../utils';\n\nexport default function(entries) {\n  const Constructor = this;\n  if (isArray) {\n    return new Constructor((resolve, reject) => {\n      for(let i = 0; i < entries.length; i++) {\n        const e = entries[i];\n        Constructor.resolve(e).then(resolve, reject);\n      }\n    });\n  }\n  return new Constructor((_, reject) => {\n    reject(needArray());\n  });\n}","\nimport {\n  resolve,\n  reject,\n  PENDING,\n  FULFILLED,\n  invokeCallback,\n  subscribe\n} from './src/core';\nimport {\n  needResolver,\n  needNew,\n  isFunction,\n  noop,\n  nextId\n} from './src/utils';\nimport asap from './src/asap';\nimport originalResolve from './src/promise/resolve';\nimport originReject from './src/promise/reject';\nimport race from './src/promise/race';\n\nfunction checkResolver(resolver) {\n  return isFunction(resolver) || needResolver();\n}\n\nfunction checkNew(x) {\n  return x instanceof Promise || needNew()\n}\n\nclass Promise {\n  constructor(resolver) {\n    this._ID = nextId();\n    this._result = undefined;\n    this._state = undefined;\n    this._subscribers = [];\n\n    if (checkResolver(resolver) && checkNew(this)) {\n      // 执行resolver\n      try {\n        resolver(\n          value => resolve(this, value),\n          reason => reject(this, reason)\n        )\n      } catch(e) {\n        reject(this, e);\n      }\n    }\n  }\n\n  then(onFulfillment, onRejection) {\n    const parent = this;\n    const child = new this.constructor(noop);\n\n    if (parent._state !== PENDING) {\n      const callback = parent._state === FULFILLED ? onFulfillment : onRejection;\n      asap(() => {\n        invokeCallback(child, parent._state, callback, parent._result);\n      })\n    } else {\n      subscribe(parent, child, onFulfillment, onRejection);\n    }\n\n    return child;\n  }\n\n  catch(onRejection) {\n    return this.then(null, onRejection);\n  }\n\n  finally(callback) {\n    return this.then(callback, callback)\n  }\n}\n\nPromise.resolve = originalResolve;\nPromise.reject = originReject;\nPromise.race = race;\n\nexport default Promise;"],"names":["needResolver","TypeError","needNew","selfFulfilled","returnOwn","needArray","noop","isFunction","x","isArray","Array","id","nextId","callback","args","setTimeout","PENDING","FULFILLED","REJECTED","TRY_CATCH_ERROR","error","tryCatch","value","e","isThenable","then","resolve","promise","reject","handleMaybeThenable","fulfill","thenable","constructor","handlePromise","_state","_result","RE","subscribe","undefined","reason","_subscribers","length","asap","publish","subscribers","i","child","invokeCallback","state","result","hasCallback","succeed","failed","parent","onFulfillment","onRejection","Constructor","_resolve","_reject","entries","_","checkResolver","resolver","checkNew","Promise","_ID","originalResolve","originReject","race"],"mappings":"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"}