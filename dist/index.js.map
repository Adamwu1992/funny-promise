{"version":3,"file":"index.js","sources":["../src/utils.js","../src/asap.js","../src/core.js","../src/promise/resolve.js","../src/promise/reject.js","../src/promise/race.js","../index.js"],"sourcesContent":["export function needResolver() {\n  throw new TypeError('You must pass a resolver function as the first argument to the promise constructor.');\n}\n\nexport function needNew() {\n  throw new TypeError('Failed to construct \\'Promise\\': Please use the \\'new\\' operator, this object constructor cannot be called as a function.');\n}\n\nexport function selfFulfilled() {\n  throw new TypeError('You cannot resolve a promise with itself.')\n}\n\nexport function returnOwn() {\n  return new TypeError('A promises callback cannot return that same promise.')\n}\n\nexport function needArray() {\n  throw new TypeError('You must pass an array as argument.')\n}\n\nexport function noop() {}\n\nexport function isFunction(x) {\n  return typeof x === 'function';\n}\n\nexport function isArray(x) {\n  return Array.isArray(x);\n}\n\nlet id = 0;\nexport function nextId() {\n  return id++;\n}\n\nexport function isObjectOrFunction(x) {\n  const t = typeof x;\n  return x !== null && (t === 'object' || t === 'function');\n}","export default function(callback, args) {\n  setTimeout(callback, 1, args);\n}","import {\n  selfFulfilled,\n  isFunction,\n  returnOwn,\n  isObjectOrFunction\n} from './utils';\nimport asap from './asap';\n\nexport const PENDING = void 0;\nexport const FULFILLED = 1;\nexport const REJECTED = 2;\n\nconst TRY_CATCH_ERROR = { error: null }\nfunction tryCatch(callback, value) {\n  try {\n    return callback(value);\n  } catch(e) {\n    TRY_CATCH_ERROR.error = e;\n    return TRY_CATCH_ERROR;\n  }\n}\n\nfunction getThen(thenable) {\n  try {\n    return thenable.then;\n  } catch (e) {\n    TRY_CATCH_ERROR.error = e;\n    return TRY_CATCH_ERROR;\n  }\n}\n\nexport function resolve(promise, value) {\n  if (promise === value) {\n    reject(promise, selfFulfilled());\n  } else if (isObjectOrFunction(value)) {\n    handleMaybeThenable(promise, value, getThen(value));\n  } else {\n    fulfill(promise, value);\n  }\n}\n\nexport function handleMaybeThenable(promise, thenable, then) {\n  // if (!isFunction(then)) {\n  //   return;\n  // };\n  // 判断是否promise\n  if (thenable.constructor === promise.constructor) {\n    handlePromise(promise, thenable);\n  } else if (then === TRY_CATCH_ERROR) {\n    reject(promise, TRY_CATCH_ERROR.error);\n    TRY_CATCH_ERROR.error = null;\n  } else {\n    fulfill(promise, thenable);\n  }\n}\n\nexport function handlePromise(promise, thenable) {\n  if (thenable._state === FULFILLED) {\n    fulfill(promise, thenable._result);\n  } else if (thenable._state === REJECTED) {\n    reject(promise, thenable._result);\n  } else {\n    subscribe(\n      thenable,\n      undefined,\n      value => resolve(promise, value),\n      reason => reject(promise, reason)\n    );\n  }\n}\n\nexport function fulfill(promise, value) {\n  if (promise._state !== PENDING) return;\n  promise._state = FULFILLED\n  promise._result = value;\n\n  if (promise._subscribers.length !== 0) {\n    asap(publish, promise);\n  }\n}\n\nexport function reject(promise, reason) {\n  if (promise._state !== PENDING) return;\n  promise._state = REJECTED\n  promise._result = reason;\n\n  if (promise._subscribers.length !== 0) {\n    asap(publish, promise);\n  }\n}\n\nexport function publish(promise) {\n  const subscribers = promise._subscribers;\n\n  if (promise._state === PENDING || subscribers.length === 0) return;\n\n  for(let i = 0; i < subscribers.length; i += 3) {\n    const child = subscribers[i];\n    const callback = subscribers[i + promise._state];\n\n    if (child) {\n      invokeCallback(child, promise._state, callback, promise._result);\n    } else {\n      callback(promise._result);\n    }\n  }\n\n  subscribers.length = 0;\n}\n\n/**\n * \n * @param {*} promise: child promise\n * @param {*} state: parent promise's state\n * @param {*} callback: for child promise\n * @param {*} result: parent promse's result\n */\nexport function invokeCallback(promise, state, callback, result) {\n  const hasCallback = isFunction(callback);\n  let value;\n  let error;\n  let succeed;\n  let failed;\n\n  if (hasCallback) {\n    value = tryCatch(callback, result);\n    if (value === TRY_CATCH_ERROR) {\n      failed = true;\n      error = TRY_CATCH_ERROR.error;\n      TRY_CATCH_ERROR.error = null;\n    } else {\n      succeed = true;\n    }\n    if (value === promise) {\n      reject(promise, returnOwn())\n      return;\n    }\n  } else {\n    value = result;\n    succeed = true;\n  }\n\n  if (promise._state !== PENDING) return;\n  // 将promise迁移到对应的状态\n  if (hasCallback) {\n    if (succeed) {\n      resolve(promise, value);\n    } else if (failed) {\n      reject(promise, error);\n    }\n  } else {\n    if (state === FULFILLED) {\n      fulfill(promise, value);\n    } else if (state === REJECTED) {\n      reject(promise, value);\n    }\n  }\n}\n\nexport function subscribe(parent, child, onFulfillment, onRejection) {\n  const subscribers = parent._subscribers;\n  const length = subscribers.length;\n\n  subscribers[length] = child;\n  subscribers[length + 1] = onFulfillment;\n  subscribers[length + 2] = onRejection;\n\n  if (length === 0 && parent._state !== PENDING) {\n    asap(publish, parent);\n  }\n}","import { resolve as _resolve } from '../core';\nimport { noop } from '../utils';\n\nexport default function(value) {\n  const Constructor = this;\n  if (value && value.constructor === Constructor) {\n    return value;\n  }\n  \n  const promise = new Constructor(noop);\n  _resolve(promise, value);\n  return promise;\n}","import { reject as _reject } from '../core';\nimport { noop } from '../utils';\n\nexport default function(reason) {\n  const Constructor = this;\n  const promise = new Constructor(noop);\n  _reject(promise, reason);\n  return promise;\n}","import { isArray, needArray } from '../utils';\n\nexport default function(entries) {\n  const Constructor = this;\n  if (isArray) {\n    return new Constructor((resolve, reject) => {\n      for(let i = 0; i < entries.length; i++) {\n        const e = entries[i];\n        Constructor.resolve(e).then(resolve, reject);\n      }\n    });\n  }\n  return new Constructor((_, reject) => {\n    reject(needArray());\n  });\n}","\nimport {\n  resolve,\n  reject,\n  PENDING,\n  FULFILLED,\n  invokeCallback,\n  subscribe\n} from './src/core';\nimport {\n  needResolver,\n  needNew,\n  isFunction,\n  noop,\n  nextId\n} from './src/utils';\nimport asap from './src/asap';\nimport originalResolve from './src/promise/resolve';\nimport originReject from './src/promise/reject';\nimport race from './src/promise/race';\n\nfunction checkResolver(resolver) {\n  return isFunction(resolver) || needResolver();\n}\n\nfunction checkNew(x) {\n  return x instanceof Promise || needNew()\n}\n\nclass Promise {\n  constructor(resolver) {\n    this._ID = nextId();\n    this._result = undefined;\n    this._state = undefined;\n    this._subscribers = [];\n\n    if (checkResolver(resolver) && checkNew(this)) {\n      // 执行resolver\n      try {\n        resolver(\n          value => resolve(this, value),\n          reason => reject(this, reason)\n        )\n      } catch(e) {\n        reject(this, e);\n      }\n    }\n  }\n\n  then(onFulfillment, onRejection) {\n    const parent = this;\n    const child = new this.constructor(noop);\n\n    if (parent._state !== PENDING) {\n      const callback = parent._state === FULFILLED ? onFulfillment : onRejection;\n      asap(() => {\n        invokeCallback(child, parent._state, callback, parent._result);\n      })\n    } else {\n      subscribe(parent, child, onFulfillment, onRejection);\n    }\n\n    return child;\n  }\n\n  catch(onRejection) {\n    return this.then(null, onRejection);\n  }\n\n  finally(callback) {\n    return this.then(callback, callback)\n  }\n}\n\nPromise.resolve = originalResolve;\nPromise.reject = originReject;\nPromise.race = race;\n\nexport default Promise;"],"names":["needResolver","TypeError","needNew","selfFulfilled","returnOwn","needArray","noop","isFunction","x","isArray","Array","id","nextId","isObjectOrFunction","t","callback","args","setTimeout","PENDING","FULFILLED","REJECTED","TRY_CATCH_ERROR","error","tryCatch","value","e","getThen","thenable","then","resolve","promise","reject","handleMaybeThenable","fulfill","constructor","handlePromise","_state","_result","subscribe","undefined","reason","_subscribers","length","asap","publish","subscribers","i","child","invokeCallback","state","result","hasCallback","succeed","failed","parent","onFulfillment","onRejection","Constructor","_resolve","_reject","entries","_","checkResolver","resolver","checkNew","Promise","_ID","originalResolve","originReject","race"],"mappings":"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"}